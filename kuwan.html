<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发现酷玩</title>
    <link rel="stylesheet" href="./css/h_f_nav.css">
    <link rel="stylesheet" href="./css/kuwan.css">
    <script src="./js/jquery.min.js"></script>
</head>

<body>
    <!-- 主题 -->
    <div id="main">
        <!-- 头部导航栏 -->
        <div class="header">
            <!-- logo -->
            <a href="#" class="logo">
                <img src="./img/logonew.png">
            </a>
            <!-- 中部导航栏 -->
            <ul class="head_nav">
                <li><a href="#">首页</a></li>
                <li><a href="#">酷玩</a></li>
                <li><a href="#">导购</a></li>
                <li><a href="#">使用</a></li>
                <li><a href="#">报告</a></li>
            </ul>
            <!-- 搜索 注册 登录 -->
            <div class="search_log_reg">
                <div class="search">
                    <span></span>
                </div>
                <span>注册</span>
                <span>登录</span>
            </div>
        </div>
        <!-- 内容 -->
        <div class="cont">
            <!-- 标题 -->
            <h1>发现酷玩</h1>
            <!-- 按钮 -->
            <div class="cont_btn">
                <span click="new_()">最新</span>
                <span>最热</span>
                <span>品类</span>
            </div>
            <!-- 商品详情 -->
            <div class="comm">
                <div class="comm_big">
                    <div class="comm_small">
                        <img src="./img/bg5.jpg" alt="">
                        <div class="comm_title">
                            <h4>SCIO</h4>
                            <span>可以检测</span>
                        </div>
                        <div class="price">
                            <span>￥</span>
                            <div class="xin">
                                <span><img src="./img/xin.png"></span>
                                <span><img src="./img/reply.png"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="./js/template-web.js"></script>
<script type="text/html" id="tpl">
    {{each res1}}
        <div class="comm_small">
            <img src="{{$value.img}}">
            <div class="comm_title">
                <h4>{{$value.description}}</h4>
                <span>{{$value.text}}</span>
            </div>
            <div class="price">
                <span>{{$value.price}}</span>
                <div class="xin">
                    <span><img src="./img/xin.png">{{$value.like}}</span>
                    <span><img src="./img/reply.png">{{$value.words}}</span>
                </div>
            </div>
        </div>
    {{/each}}
</script>
<script>
    function new_() {
        $.ajax({
            type: "get",
            url: "http://127.0.0.1:3000/play/hot",
            success: (function (res) {
                var res1 = []//双重循环得到数组中的数据
                for (var item of res) {
                    for (var i of item) {
                        res1.push(i);
                    }
                }
                const kuwan_new = template('tpl', {
                    res1: res1
                })
                // console.log(res1)
                $(".comm .comm_big").html(kuwan_new);//渲染到页面
            })
        })
    }
    new_();
</script>

</html>